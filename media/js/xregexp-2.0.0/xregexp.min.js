var XRegExp;XRegExp=XRegExp||function(e){"use strict";function t(e,t,n){var r;for(r in u.prototype)u.prototype.hasOwnProperty(r)&&(e[r]=u.prototype[r]);return e.xregexp={captureNames:t,isNative:!!n},e}function n(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function r(e,r,i){if(!u.isRegExp(e))throw new TypeError("type RegExp expected");var a=x.replace.call(n(e)+(r||""),w,"");return i&&(a=x.replace.call(a,new RegExp("["+i+"]+","g"),"")),e=e.xregexp&&!e.xregexp.isNative?t(u(e.source,a),e.xregexp.captureNames?e.xregexp.captureNames.slice(0):null):t(new RegExp(e.source,a),null,!0)}function i(e,t){var n=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(t);for(;n--;)if(e[n]===t)return n;return-1}function a(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function l(e){return"all"===(e=e||{})||e.all?e={natives:!0,extensibility:!0}:a(e,"string")&&(e=u.forEach(e,/[^\s,]+/,function(e){this[e]=!0},{})),e}function o(e,t,n,r){var i,a,l=y.length,o=null;N=!0;try{for(;l--;)if(("all"===(a=y[l]).scope||a.scope===n)&&(!a.trigger||a.trigger.call(r))&&(a.pattern.lastIndex=t,(i=h.exec.call(a.pattern,e))&&i.index===t)){o={output:a.handler.call(r,i,n),match:i};break}}catch(e){throw e}finally{N=!1}return o}function c(e){u.addToken=p[e?"on":"off"],f.extensibility=e}function s(e){RegExp.prototype.exec=(e?h:x).exec,RegExp.prototype.test=(e?h:x).test,String.prototype.match=(e?h:x).match,String.prototype.replace=(e?h:x).replace,String.prototype.split=(e?h:x).split,f.natives=e}var u,p,g,f={natives:!1,extensibility:!1},x={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},h={},d={},y=[],E={default:/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,class:/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},v=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,w=/([\s\S])(?=[\s\S]*\1)/g,m=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,S=void 0===x.exec.call(/()??/,"")[1],b=void 0!==RegExp.prototype.sticky,N=!1,R="gim"+(b?"y":"");return u=function(e,n){if(u.isRegExp(e)){if(void 0!==n)throw new TypeError("can't supply flags when constructing one RegExp from another");return r(e)}if(N)throw new Error("can't call the XRegExp constructor within token definition functions");var i,a,l,c=[],s="default",p={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return n.indexOf(e)>-1}},g=0;if(e=void 0===e?"":String(e),n=void 0===n?"":String(n),x.match.call(n,w))throw new SyntaxError("invalid duplicate regular expression flag");for(e=x.replace.call(e,/^\(\?([\w$]+)\)/,function(e,t){if(x.test.call(/[gy]/,t))throw new SyntaxError("can't use flag g or y in mode modifier");return n=x.replace.call(n+t,w,""),""}),u.forEach(n,/[\s\S]/,function(e){if(R.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])});g<e.length;)(i=o(e,g,s,p))?(c.push(i.output),g+=i.match[0].length||1):(a=x.exec.call(E[s],e.slice(g)))?(c.push(a[0]),g+=a[0].length):("["===(l=e.charAt(g))?s="class":"]"===l&&(s="default"),c.push(l),++g);return t(new RegExp(c.join(""),x.replace.call(n,/[^gimy]+/g,"")),p.hasNamedCapture?p.captureNames:null)},p={on:function(e,t,n){n=n||{},e&&y.push({pattern:r(e,"g"+(b?"y":"")),handler:t,scope:n.scope||"default",trigger:n.trigger||null}),n.customFlags&&(R=x.replace.call(R+n.customFlags,w,""))},off:function(){throw new Error("extensibility must be installed before using addToken")}},u.addToken=p.off,u.cache=function(e,t){var n=e+"/"+(t||"");return d[n]||(d[n]=u(e,t))},u.escape=function(e){return x.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},u.exec=function(e,t,n,i){var a,l=r(t,"g"+(i&&b?"y":""),!1===i?"y":"");return l.lastIndex=n=n||0,a=h.exec.call(l,e),i&&a&&a.index!==n&&(a=null),t.global&&(t.lastIndex=a?l.lastIndex:0),a},u.forEach=function(e,t,n,r){for(var i,a=0,l=-1;i=u.exec(e,t,a);)n.call(r,i,++l,e,t),a=i.index+(i[0].length||1);return r},u.globalize=function(e){return r(e,"g")},u.install=function(e){e=l(e),!f.natives&&e.natives&&s(!0),!f.extensibility&&e.extensibility&&c(!0)},u.isInstalled=function(e){return!!f[e]},u.isRegExp=function(e){return a(e,"regexp")},u.matchChain=function(e,t){return function e(n,r){var i,a=t[r].regex?t[r]:{regex:t[r]},l=[],o=function(e){l.push(a.backref?e[a.backref]||"":e[0])};for(i=0;i<n.length;++i)u.forEach(n[i],a.regex,o);return r!==t.length-1&&l.length?e(l,r+1):l}([e],0)},u.replace=function(e,t,n,i){var a,l=u.isRegExp(t),o=t;return l?(void 0===i&&t.global&&(i="all"),o=r(t,"all"===i?"g":"","all"===i?"":"g")):"all"===i&&(o=new RegExp(u.escape(String(t)),"g")),a=h.replace.call(String(e),o,n),l&&t.global&&(t.lastIndex=0),a},u.split=function(e,t,n){return h.split.call(e,t,n)},u.test=function(e,t,n,r){return!!u.exec(e,t,n,r)},u.uninstall=function(e){e=l(e),f.natives&&e.natives&&s(!1),f.extensibility&&e.extensibility&&c(!1)},u.union=function(e,t){var n,r,i,l,o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,c=0,s=function(e,t,i){var a=r[c-n];if(t){if(++c,a)return"(?<"+a+">"}else if(i)return"\\"+(+i+n);return e},p=[];if(!a(e,"array")||!e.length)throw new TypeError("patterns must be a nonempty array");for(l=0;l<e.length;++l)i=e[l],u.isRegExp(i)?(n=c,r=i.xregexp&&i.xregexp.captureNames||[],p.push(u(i.source).source.replace(o,s))):p.push(u.escape(i));return u(p.join("|"),t)},u.version="2.0.0",h.exec=function(e){var t,r,a,l,o;if(this.global||(l=this.lastIndex),t=x.exec.apply(this,arguments)){if(!S&&t.length>1&&i(t,"")>-1&&(a=new RegExp(this.source,x.replace.call(n(this),"g","")),x.replace.call(String(e).slice(t.index),a,function(){var e;for(e=1;e<arguments.length-2;++e)void 0===arguments[e]&&(t[e]=void 0)})),this.xregexp&&this.xregexp.captureNames)for(o=1;o<t.length;++o)(r=this.xregexp.captureNames[o-1])&&(t[r]=t[o]);this.global&&!t[0].length&&this.lastIndex>t.index&&(this.lastIndex=t.index)}return this.global||(this.lastIndex=l),t},h.test=function(e){return!!h.exec.call(this,e)},h.match=function(e){if(u.isRegExp(e)){if(e.global){var t=x.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return h.exec.call(e,this)},h.replace=function(e,t){var n,r,l,o,c=u.isRegExp(e);return c?(e.xregexp&&(n=e.xregexp.captureNames),e.global||(o=e.lastIndex)):e+="",a(t,"function")?r=x.replace.call(String(this),e,function(){var r,i=arguments;if(n)for(i[0]=new String(i[0]),r=0;r<n.length;++r)n[r]&&(i[0][n[r]]=i[r+1]);return c&&e.global&&(e.lastIndex=i[i.length-2]+i[0].length),t.apply(null,i)}):(l=String(this),r=x.replace.call(l,e,function(){var e=arguments;return x.replace.call(String(t),v,function(t,r,a){var l;if(r){if((l=+r)<=e.length-3)return e[l]||"";if((l=n?i(n,r):-1)<0)throw new SyntaxError("backreference to undefined group "+t);return e[l+1]||""}if("$"===a)return"$";if("&"===a||0==+a)return e[0];if("`"===a)return e[e.length-1].slice(0,e[e.length-2]);if("'"===a)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(a=+a,!isNaN(a)){if(a>e.length-3)throw new SyntaxError("backreference to undefined group "+t);return e[a]||""}throw new SyntaxError("invalid token "+t)})})),c&&(e.global?e.lastIndex=0:e.lastIndex=o),r},h.split=function(e,t){if(!u.isRegExp(e))return x.split.apply(this,arguments);var n,r=String(this),i=e.lastIndex,a=[],l=0;return t=(void 0===t?-1:t)>>>0,u.forEach(r,e,function(e){e.index+e[0].length>l&&(a.push(r.slice(l,e.index)),e.length>1&&e.index<r.length&&Array.prototype.push.apply(a,e.slice(1)),n=e[0].length,l=e.index+n)}),l===r.length?x.test.call(e,"")&&!n||a.push(""):a.push(r.slice(l)),e.lastIndex=i,a.length>t?a.slice(0,t):a},(g=p.on)(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&"default"===t)return e[0];throw new SyntaxError("invalid escape "+e[0])},{scope:"all"}),g(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),g(/(?:\(\?#[^)]*\))+/,function(e){return x.test.call(m,e.input.slice(e.index+e[0].length))?"":"(?:)"}),g(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?i(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")}),g(/(?:\s+|#.*)+/,function(e){return x.test.call(m,e.input.slice(e.index+e[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"}),g(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"}),g(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),g(/\\(\d+)/,function(e,t){if(!("default"===t&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all"}),g(/\((?!\?)/,function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")},{customFlags:"n"}),"undefined"!=typeof exports&&(exports.XRegExp=u),u}();